import dronekit
import socket
import exceptions
import time
from dronekit import VehicleMode
from drone_basic import arm, arm_and_takeoff

# Try to connect to PX4
try:
    vehicle = dronekit.connect('/dev/ttyAMA0', baud=921600, wait_ready=True)
# Bad TCP connection
except socket.error:
    print 'No server exists!'
# Bad TTY connection
except exceptions.OSError as e:
    print 'No serial exists!'
# API Error
except dronekit.APIException:
    print 'Timeout!'
# Other error
except:
    print 'Some other error!'

Precipitation


if vehicle:
    print('Mode:', vehicle.mode.name)
    arm_and_takeoff(vehicle, 10)
    time.sleep(10)
    vehicle.mode = VehicleMode('LAND')
''' for i in range(20):
        if vehicle.mode == VehicleMode("OFFBOARD"):
            print('Heading:', vehicle.heading)
            print('Velocity:', vehicle.velocity)
            time.sleep(0.5)
            vehicle.armed   = True
            time.sleep(2)
            vehicle.armed   = False
        else:
            print 'Interrupt from controller, mission is stopped.'
            break;
'''
vehicle.close()
